function bind_dazhuanpan(){zhuanpan_dazhuanpan(),win_dazhuanpan()}function zhuanpan_dazhuanpan(){new Zhuanpan({nologin_show:win_forlogin_show,nochance_show:win_nochance_show,gongxizhongjiang_show:win_gongxizhongjiang_show,wanshandizhi_show:win_wanshandizhi_show,nozhongjiang_show:win_nozhongjiang_show})}function win_dazhuanpan(){$("#closebtn").click(function(){$(".win").hide()})}function win_forlogin_show(){$(".win .boxitem,.coin2,.coin3").hide(),$("#forlogin,.coin2").show(),$(".win").show()}function win_loginsuccess_show(){$(".win .boxitem,.coin2,.coin3").hide(),$("#loginsuccess,.coin2").show(),$(".win").show()}function win_nochance_show(a){$("#nochance p").text(a),$(".win .boxitem,.coin2,.coin3").hide(),$("#nochance,.coin2").show(),$(".win").show()}function win_gongxizhongjiang_show(a){$("#gongxizhongjiang span").text(a),$(".win .boxitem,.coin2,.coin3").hide(),$("#gongxizhongjiang,.coin3").show(),$(".win").show()}function win_wanshandizhi_show(){$(".win .boxitem,.coin2,.coin3").hide(),$("#wanshandizhi,.coin3").show(),$(".win").show()}function win_nozhongjiang_show(a){$("#nozhongjiang .msg").text(a),$(".win .boxitem,.coin2,.coin3").hide(),$("#nozhongjiang").show(),$(".win").show()}function ScrollTop(a){this.opt=a||{},this.onetime=this.opt.onetime||3e3,this.movetime=this.opt.movetime||1e3,this.$container=this.opt.$container,this.type=this.opt.type||"table",this.row_tag_name=this.opt.row_tag_name||"tr",this.oneline_height=0,this.size=0,this.total_height=0,this.init_top=0}function Zhuanpan(a){this.opt=a||{},this.$container=this.opt.$container||$(".panzone"),this.$startBtn=this.opt.$startBtn||$("#start"),this.$img1=this.opt.$img1||$("#img_t"),this.$img2=this.opt.$img2||$("#img_f"),this.trynum=8,this.ajax_return_flag=!1,this.target=0,this.msg="",this.prizetype=1,this.global_ajaxdomain="http://www.lenovo.com.cn/srv/",this.wheel_id="740b7523-35c6-4d1d-8191-1c9863e0e1eb",this.islogin_flag=!0,this.forlogin_url="",this.canclick=!0,this.init()}$().ready(function(){console.log("a")});var j="cl";$().ready(function(){console.log("b")}),$().ready(function(){bind_dazhuanpan()}),ScrollTop.prototype={constructor:ScrollTop,init:function(){this.init_top=this.$container.position().top,"table"!=this.type&&(this.row_tag_name="li"),this.oneline_height=this.$container.find(this.row_tag_name).height(),this.size=this.$container.find(this.row_tag_name).size(),this.$container.append(this.$container.find(this.row_tag_name).clone())},play:function(){var a=this;setInterval(function(){var b=a.$container.position().top;a.$container.animate({top:b-a.oneline_height},a.movetime,function(){a.total_height==a.size*a.oneline_height&&(a.$container.css("top",a.init_top),a.total_height=0)}),a.total_height+=a.oneline_height},this.onetime)}},Zhuanpan.prototype={constructor:Zhuanpan,init:function(){this.init_ajax(),this.bind()},init_ajax:function(){this.ajax.heros(this,{}),void 0!=window.passport&&window.passport.isLogin?passport.isLogin()&&(islogin_flag=!0,this.ajax.choujiangcishu(this,{})):this.ajax.choujiangcishu(this,{})},gologinpage:function(){window.location.href=this.forlogin_url},bind:function(){var a=this;this.$startBtn.click(function(){return passport.isLogin()?void(a.canclick&&0!=a.validate()&&(a.$img1.hide(),a.$img2.show(),a.rotation_f(),a.canclick=!1,a.ajax.choujiang(a,{sucFn:function(b){0==b.rc?(a.ajax_return_flag=!0,a.target=-b.angle,a.msg_jiangpin=b.msg,a.prizetype=b.prizetype,a.chance_num--,0==a.chance_num&&(a.msg="嗷嗷，您的抽奖次数用完啦！")):401==b.rc&&(a.stop(),a.gologinpage())}}))):void $("#LoginID").click()})},rotation_f:function(){var a=this;this.$img2.rotate({angle:0,animateTo:3600+a.target,callback:function(){a.scan()},duration:2e3,easing:function(a,b,c,d,e){return d*(b/e)+c}})},rotation_t:function(){var a=this;$("#img_t").rotate({angle:0,animateTo:3600+a.target,callback:function(){a.stop()},duration:3e3})},scan:function(){return this.trynum--,this.trynum<=0?(this.$img2.stopRotate(),alert("网络异常,请稍后重试"),this.trynum=8,void(this.canclick=!0)):void(this.ajax_return_flag?(this.$img2.stopRotate(),this.$img2.hide(),this.$img1.show(),this.rotation_t(),this.trynum=8):this.rotation_f())},stop:function(){1==this.prizetype?this.opt.gongxizhongjiang_show&&this.opt.gongxizhongjiang_show(this.msg_jiangpin):this.opt.wanshandizhi_show&&this.opt.wanshandizhi_show(this.msg_jiangpin),this.$img1.stopRotate(),this.ajax_return_flag=!1,this.canclick=!0},validate:function(){return this.islogin_flag?this.chance_num<=0?(this.opt.nochance_show&&this.opt.nochance_show(this.msg),0):1:(this.opt.nologin_show&&this.opt.nologin_show(this.msg),0)},ajax:{common:function(a){$.ajax({method:a.methodType||"GET",url:a.url,data:a.data||{},dataType:a.dataType||"",success:function(b){a.sucFn&&a.sucFn(b)},error:function(b){a.errFn&&a.errFn(b)},complete:function(){a.completeFn&&a.completeFn()}})},choujiang:function(a,b){b.url=a.global_ajaxdomain+"lotterydraw.do?plat=4&rotatingwheelid="+a.wheel_id,b.dataType="json",this.common(b)},choujiangcishu:function(a,b){b.url=a.global_ajaxdomain+"canlotterydraw.do?plat=4&rotatingwheelid="+a.wheel_id,b.dataType="json",b.sucFn=function(b){0==b.rc?(a.chance_num=b.chance,a.msg=b.msg):401==b.rc&&a.gologinpage()},this.common(b)},heros:function(a,b){b.url=a.global_ajaxdomain+"lotterydrawhistory.do?plat=4&rotatingwheelid="+a.wheel_id,b.dataType="json",b.sucFn=function(b){if(0==b.rc){var c=a.fn.get_trs(b.prizelist);$(".heros > table").empty().append(c),new ScrollTop({$container:$(".heros > table")}).play()}else 401==b.rc&&a.gologinpage()},this.common(b)}},fn:{get_trs:function(a){var b="";if(a&&a.length>0)for(var c=0,d=a.length;d>c;c++){var e="";e=c%2==0?"color1":"color2",b+='<tr class="'+e+'"><td class="col1">'+a[c].membername+'</td><td class="col2">'+a[c].time+'</td><td class="col3">'+a[c].prize+"</td></tr>"}return b}}};